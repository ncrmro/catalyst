# Auth.js Configuration
# You need to add this in your .env.local file

# NextAuth Secret (generate a random secret)
AUTH_SECRET=txPLQWs8toKE251TIWiGS6abI4dJafPA5Kd/DTxou6q5

# GitHub App Configuration
# For GitHub App integration (separate from OAuth above)
# Get these values from your GitHub App settings
GITHUB_APP_ID=your_app_id_here
GITHUB_APP_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\nstub\n-----END RSA PRIVATE KEY-----"

# GitHub App OAuth Credentials (for user authentication via Auth.js)
# Get these from your GitHub App's OAuth credentials section
GITHUB_APP_CLIENT_ID=your_github_app_client_id_here
GITHUB_APP_CLIENT_SECRET=your_github_app_client_secret_here

# GitHub Webhook Secret (for validating webhook signatures)
# Generate a secure random secret for your GitHub App webhook
GITHUB_WEBHOOK_SECRET=your_webhook_secret_here

# GitHub App Installation URL (for "Install Now" buttons)
# Format: https://github.com/apps/{YOUR_APP_NAME}/installations/new
NEXT_PUBLIC_GITHUB_APP_URL=https://github.com/apps/your-app-name/installations/new
# Used to simulate prod where user has access token from Oauth/Github App follow
# GITHUB_PAT=

# GitHub Container Registry (GHCR) Personal Access Token (LOCAL TESTING ONLY)
# Classic Personal Access Token with 'write:packages' scope for pushing/pulling from GHCR
# Generate at: https://github.com/settings/tokens (select "Tokens (classic)")
# Required for PR pod deployments that push to GHCR during local spike testing
# WARNING: Only use for local development - production should use GitHub App tokens
#GITHUB_GHCR_PAT=
# Token Encryption Key (64-character hex string)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
TOKEN_ENCRYPTION_KEY=your_64_character_hex_encryption_key_here

# AI Provider Configuration
# Set these API keys to use AI-powered features like periodic reports
# OPENAI_API_KEY=your_openai_api_key_here
# ANTHROPIC_API_KEY=your_anthropic_api_key_here

# Feature Flags
# In development: feature flags default to enabled unless set to "0"
# In production: feature flags are only enabled when set to "1"
# Set FF_USER_CLUSTERS=1 to enable the clusters page, or FF_USER_CLUSTERS=0 to disable in development
# FF_USER_CLUSTERS=1

# Service Port Configuration
# Database port (PostgreSQL) - for external access from host
DB_PORT=5432

# Application port (Next.js)
WEB_PORT=3000

# Ingress port for K3s VM (NGINX ingress controller)
# Defaults to 8080 (non-privileged port, no root required)
INGRESS_PORT=8080

# Local Preview Environment Routing
# Set to "true" to use path-based routing for local development
# Path-based: http://localhost:8080/env-preview-123/
# Hostname-based (production): https://env-preview-123.preview.catalyst.dev/
LOCAL_PREVIEW_ROUTING=true

# Database Configuration
# For local development with Docker Compose
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/catalyst

# Base64 JSON encoded kubeconfig
#KUBECONFIG_PRIMARY=

# Development Mode Configuration
# Set GITHUB_REPOS_MODE=mocked to use YAML mock data instead of real GitHub API calls
# Set MOCKED=1 to enable general mocking mode for development
# These are automatically set by "make up" but can be overridden for testing
GITHUB_REPOS_MODE=mocked
MOCKED=1

# Preview Environment Domain Configuration
# Default domain for preview environments (users should CNAME *.preview.example.com to your ingress)
# Example: DEFAULT_PREVIEW_DOMAIN=preview.example.com
# This results in preview URLs like: https://env-preview-123.preview.example.com
DEFAULT_PREVIEW_DOMAIN=preview.localhost

# Ingress Configuration
# Kubernetes ingress class name (typically "nginx" or "traefik")
INGRESS_CLASS_NAME=nginx

# TLS/SSL Configuration
# Enable automatic TLS certificate provisioning (requires cert-manager)
ENABLE_TLS=false
# Cert-manager ClusterIssuer name (e.g., "letsencrypt-prod" or "letsencrypt-staging")
# TLS_ISSUER=letsencrypt-prod
